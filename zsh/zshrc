#!/bin/zsh
##################################################################################################
#
#					 ____  _   _    _    ____ ___     _____   _    ____  _____ 
#					/ ___|| | | |  / \  |  _ \_ _|   |__  /  / \  |  _ \| ____|
#					\___ \| |_| | / _ \ | | | | |_____ / /  / _ \ | | | |  _|  
#					 ___) |  _  |/ ___ \| |_| | |_____/ /_ / ___ \| |_| | |___ 
#					|____/|_| |_/_/   \_\____/___|   /____/_/   \_\____/|_____|
#
#					https://github.com/ShadiZade
#					.zshrc
#					zsh config
#
###################################################################################################
####### symlink location: ~/.config/zsh/ ##########################################################
source ~/.config/zsh/extra-zsh-settings
PROMPT=' %F{#55ff55}%2~%f %S%F{#55ff55} å› %D{%H:%M} ðŸ ¦ %f%s '

# simple aliases
alias '..'="cd .. && ll"
alias '..2'="cd ../.."
alias '..3'="cd ../../.."
alias rdol="rdo dolphin ."
alias rdold="rdo dolphin ~/Downloads"
alias rdols="rdol Holding/screenshots"
alias m="micro"
alias e="emacs -nw "
alias sm="sudo micro"
alias ff="ranger"
alias q="source ~/.config/zsh/.zshrc"
alias qq="clr; cd; ~/Repositories/scripts/terminal-art.sh"
alias qqq="clr; cd; source ~/.config/zsh/.zshrc"
alias xx="xdg-open"
alias mkdir="mkdir -pv"
alias fd="fd -i"
alias cp="cp -iv"
alias mv='mv -iv'
alias rm='rm -iv'
alias rmdir='rmdir -v'
alias grep='grep --color=auto -i'
alias window-name="xprop WM_CLASS"
alias clr="printf '\033[2J\033[3J\033[1;1H'"
alias sudo='sudo '
alias sl='sl -eal5'
alias memuse='df | grep sda1 | awk "{print \$5}" '
alias ccat='highlight'
alias ,,='trans -b'
alias yd='calc "$(date +"%Y")-$1"'
alias llwc="ll | wc -l"
alias wi="nmcli device wifi"
alias back="~/Repositories/scripts/back/backmaster.sh"
alias morse="morse-x -f 350"
alias disk-destroyer="command dd"
alias dd="echo 'Probably the wrong command. Use alias \"disk-destroyer\" for the actual dd command.'"
alias v="rdo mpv"
alias a="command mpv --vid=no --no-audio-display"
alias z="rdo zathura"
alias cf="source ~/Repositories/scripts/copy-full-path.sh && copy-and-show $1" 
alias trash-clear="rm -rf ~/.local/share/Trash/files/*"
alias xvs="xv ~/Holding/screenshots"
alias cop="tr -d '\n' | xclip -selection clipboard"
alias suben="subdl --interactive --download=query --lang=eng"
alias subar="subdl --interactive --download=query --lang=ara"

# cd aliases
## Aquire (YOU KNOW WHAT? FUCK YOU. *REFORMS YOUR SPELLING*)
alias cdq="cd ~/Aquire"
## Desktop
alias cdk="cd ~/Desktop && ll"
## Trash
alias cdt="cd ~/.local/share/Trash/files && lln -a --time=changed --sort=changed && du -sh"
## Downloads
alias cdd="cd ~/Downloads && ll"
## Misc
alias cdm="cd ~/Misc && ll"
alias cdmb="cd ~/Misc/Backups && ll"
alias cdmr="cd ~/Misc/research-topics && ll"
## Movies
alias cdmov="cd ~/Movies && l"
## Books
alias cdb="cd ~/Books"
alias cdba="cd ~/Books/add && ll"
## Config
alias cdc="cd ~/.config"
## Study
alias cds="cd ~/Study && ll"
alias cdsl="cd ~/Study/languages && ll"
alias cdsp="cd ~/Study/programming && ll"
## TV
alias cdtv="cd ~/TV && ll"
## Repositories
alias cdrs="cd ~/Repositories/scripts && ll"
alias cdrd="cd ~/Repositories/dotfiles && ll"
alias cdrz="cd ~/Repositories/ShadiZade && ll"
## Archives
alias cda="cd ~/Archives && ll"
alias cdas="cd ~/Archives/Socialist && ll"
alias cdasp="cd ~/Archives/Socialist/people && ll"
alias cdasc="cd ~/Archives/Socialist/countries && l"
alias cdap="cd ~/Archives/Palestine && ll"
alias cdar="cd ~/Archives/Personal && ll"
alias cdao="cd ~/Archives/Other && ll"
## Wallpapers
alias cdwall="cd /usr/share/wallpapers/use && ll"
## Youtube
alias cdy="cd ~/Excluding/ytvid && lln"


# translation
alias zhen="command trans -b zh:en"
alias enzh="command trans -b en:zh"
alias deen="command trans -b de:en"
alias ende="command trans -b en:de"
alias esen="command trans -b es:en"
alias enes="command trans -b en:es"
alias ruen="command trans -b ru:en"
alias enru="command trans -b en:ru"
alias laen="command trans -b la:en"
alias enla="command trans -b en:la"
alias iten="command trans -b it:en"
alias enit="command trans -b en:it"

# list
alias l="exa --icons --sort=ext --group-directories-first"
alias ll="exa -l --icons --no-user --time-style=iso --sort=ext --group-directories-first --color-scale"
alias lla="exa -la --icons --no-user --group-directories-first --sort=ext --time-style=iso --color-scale"
alias lln="exa -l --icons --no-user --time-style=iso --sort=newest --color-scale"
alias lls="exa -l --icons --no-user --time-style=iso --sort=size --group-directories-first --color-scale"
alias llt="exa -l --icons --no-user --time-style=iso --sort=ext --group-directories-first --color-scale --tree"

# package management
alias pacs="sudo pacman -S "
alias pacrsc="sudo pacman -Rsc"
alias pacr="sudo pacman -Rns"
alias pacss="pacman -Ss"
alias pacsi="pacman -Si"
alias yays="yay --removemake -S"
alias yayss="yay -Ssa"
alias yaysi="yay -Si"
alias yaysc="yay -Sc"
alias syu="sudo pacman -Syu"
alias sua="yay --removemake -Sua"
alias tree="pactree -r "
alias align-mirrors="sudo pacman-mirrors --fasttrack && sudo pacman -Syyu"

# ebooks
alias cdset="cd src/epub/text"


# git
alias '..s'="git status"
alias '..d'="git diff"
alias '..a'="git add ."
alias '..c'="git commit -m"
alias '..p'="git push -u origin master"
alias '..m'="git push -u origin main"

# scripts 
alias get-image="~/Repositories/scripts/extract-pdf-image.sh"
alias ytm="remove_p='n' ~/Repositories/scripts/ytmp3.sh"
alias ytr="remove_p='y' ~/Repositories/scripts/ytmp3.sh"
alias ytv="~/Repositories/scripts/ytvid.sh"
alias chcover="~/Repositories/scripts/chcover.sh"
alias newscript='which="script" ~/Repositories/scripts/new-micro.sh '
alias newsolution='which="solution" ~/Repositories/scripts/new-micro.sh '
alias newpbmodule='which="polybar-module" ~/Repositories/scripts/new-micro.sh '
alias newfont="~/Repositories/scripts/font-downloader.sh"
alias newmotif="~/Repositories/scripts/newmotif.sh"
alias tess='~/Repositories/scripts/tess.sh'
alias kebab='~/Repositories/scripts/kebabization.sh'
alias fw='~/Repositories/scripts/frequent-words.sh'
alias tf='~/Repositories/scripts/music-tagger.sh'
alias zas='~/Repositories/scripts/active-study.sh'

# config files
### emacs
alias â€™e="emacs -nw ~/Repositories/dotfiles/emacs/init.el"
### kitty 
alias â€™k="micro ~/Repositories/dotfiles/kitty/kitty.conf"
### zsh
alias â€™z="emacs -nw ~/Repositories/dotfiles/zsh/zshrc"
### bspwm
alias â€™b="emacs -nw ~/Repositories/dotfiles/bspwm/bspwmrc"
alias â€™s="micro ~/Repositories/dotfiles/sxhkd/sxhkdrc"
alias â€™p="emacs -nw ~/Repositories/dotfiles/polybar/config.ini"
### theming
alias â€™tc="emacs -nw ~/Repositories/scripts/bspwm-theme.sh"
alias â€™tp="~/Repositories/scripts/theme-picker.sh"

# functions
## disown
function run_disowned() {
    "$@" & disown
}
function rdo() {
    # run_disowned and silenced

    run_disowned "$@" 1>/dev/null 2>/dev/null
}

## bigdate
bd () {
    date +"%Y%m%d%H%M"
}

## pg
pg () {
    i=1
    while true;
    do echo -e "\033[31m:: Attempting...\033[0m ($i)"
       ping -qc 1 gnu.org && break
       i=$((i+1))
       sleep 3
    done
}

## xv
xv () {
    [ -z "$1" ] && location_se='.' || location_se="$1"
    images="$(fd 'jpg|jpeg|png|gif|webp|jxl|jpg_large|svg' -d 1 $location_se | sed 's/ /\\ /g')"
    [ -z "$images" ] && echo "No images found in this directory." || echo "$images" | xargs sxiv
}

## xt
xt () {
    fd -q "$1" || echo "No results."
    fd -q "$1" && fd "$1" | xargs sxiv
}

## xpa
xpa () {
    pacman -Qq | fzf --preview 'pacman -Qil {}' --layout=reverse --bind 'enter:execute(pacman -Qil {} | less)'
}

## xpt
xpt () {
    [ -z "$1" ] && numpack="12" || numpack="$1"
    expac --timefmt='%Y-%m-%d %T' "%l\t%n-%v\t%w" | sort | grep explicit | sed 's/explicit//g' | tail -n "$numpack" 
}

## xpta
xpta () {
    [ -z "$1" ] && numpack="12" || numpack="$1"
    expac --timefmt='%Y-%m-%d %T' "%l\t%n-%v" | sort | tail -n "$numpack"
}

## key-names
key-names () {
	xev | awk -F'[ )]+' '/^KeyPress/ { a[NR+2] } NR in a { printf "%-3s %s\n", $5, $8 }'
}    

## alarm
alarm () {
    echo -e "\033[33m:: Alarm set on $(date +%H:%M:%S) for $1\033[0m"
    sleep "$1"; a --loop-file=inf /usr/share/sounds/freedesktop/stereo/alarm-clock-elapsed.oga
}

## vd
vd () {
    [ -z "$1" ] && return
    command mpv "$1"
    fd -q done && chosedone="$(echo -e 'yes\nno' | fzf --prompt='Move to done?')"
    [ "$chosedone" = "yes" ] && mv -v "$1" done/
}

## knock
knock () {
    ~/.local/share/knock/.knock/knock "$1"
}

# terminal art
~/Repositories/scripts/terminal-art.sh
setxkbmap

# misc
export ZSH_COMPDUMP="$XDG_CACHE_HOME"/zsh/zcompdump-"$ZSH_VERSION" 
export HISTCONTROL=ignorespace
autoload -U compinit; compinit

# file location was changed from ~/.zshrc to ~/.config/zsh/.zshrc
# this was done by adding the following line to /etc/zsh/zshenv
# export ZDOTDIR="$HOME"/.config/zsh 
